<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
</head>
<body>
    <h1>Sign Up</h1>
    <form onsubmit="signup(); return false;"  method="POST">
        <label for="name">Name:</label>
        <input type="text" id="name" name="name"><br><br>
        <label for="name">username:</label>
        <input type="name" id="username" name="username"><br><br>
        <label for="password">Password:</label>
        <input type="password" id="password" name="password"><br><br>
      <button>Submit</button>
    </form>
    <br>
    <button onclick="getAllUsers()">Get all users</button>
    <ul id="users">
    </ul>

    <script>
        function signup() {
            let name = document.getElementById("name").value;
            let username = document.getElementById("username").value;
            let password = document.getElementById("password").value;

            axios
            .post("http://localhost:5500/user", {
                name: name,
                Rollnum: username,
                password: password
            })
            .then(function (response) {
                console.log(response);
            })
            .catch(function (error) {
                console.log(error);
            });
        }

        function getAllUsers() {
            axios
            .get("http://localhost:5500/user")
            .then(function (response) {
                let users = response.data.users;
                let list = document.getElementById("users");
                list.innerHTML = "";
                users.forEach(user => {
                    let listItem = document.createElement("li");
                    listItem.textContent = `${user.name} - ${user.Rollnum} - ${user.password}`;
                    list.appendChild(listItem);
                });
            })
            .catch(function (error) {
                console.log(error);
            });
        }
            
    </script>
</body>
</html>

